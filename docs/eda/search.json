[
  {
    "objectID": "eda_fish.html",
    "href": "eda_fish.html",
    "title": "Exploratory Analysis of Fish Survey Data",
    "section": "",
    "text": "This document presents an exploratory analysis of fish survey data collected during the PNG-2024 scientific expedition. Our goal is to characterize patterns in reef fish community structure and composition, and to identify key drivers of species richness, abundance, and biomass across spatial and ecological gradients.\nThe dataset comprises standardized underwater visual survey (UVS) data collected across multiple islands, regions, and depth strata using consistent belt transect methods. Observers recorded individual fish counts, estimated lengths, and species-level taxonomic identifications. These were used to derive metrics of abundance (individuals per m²), biomass (grams per m²), and species richness per station.\n\n\nCode\n# -- Read supporting site data --------------------------------------------\n\nsites &lt;- read_rds(file.path(exp_path, \"data/primary/processed/sites.rds\"))\n\nuvs_sites &lt;- sites$uvs\n\n# Load pre-processed fish data --------------------------------------------\n\nfish_lut &lt;- read_csv(file.path(ps_paths$projects, \"prj-legacy-db/data/processed/taxa/taxa_luts.uvs_fish_pacific.csv\"),\n                     show_col_types = FALSE) \n\nload(file = file.path(exp_path, \"data\", \"primary\", \"processed\", \"fish\", \"fish_staging.RData\"))\n\n# Are there any data filters??\n\nbiomass_by_station_and_taxa &lt;- biomass_by_station_and_taxa |&gt; \n  filter(!str_detect(common_family, \"blennie|gobie\"))\n\nbiomass_per_obs &lt;- biomass_per_obs |&gt; \n  filter(!str_detect(common_family, \"blennie|gobie\"))\n\n# --- Station-level summary -----------------------------------------------\n\nregion_lookup &lt;- stations |&gt; distinct(ps_site_id, region)\n\nstation_summary &lt;- biomass_by_station_and_taxa |&gt; \n  group_by(ps_site_id, ps_station_id, depth_strata) |&gt; \n  summarize(n_taxa         = n_distinct(accepted_aphia_id[avg_count &gt; 0]),\n            total_count    = sum(total_count),\n            avg_count      = sum(avg_count),\n            avg_count_m2   = sum(avg_count_m2),\n            avg_biomass_m2 = sum(avg_biomass_m2),\n            .groups = \"drop\") |&gt; \n  left_join(stations |&gt; \n              distinct(ps_site_id, ps_station_id, region, subregion, locality, habitat, exposure, n_transects),\n            by = c(\"ps_site_id\", \"ps_station_id\")) |&gt; \n  mutate(across(c(avg_count, avg_count_m2, avg_biomass_m2), \n                ~round(.x, 4))) |&gt; \n  select(region, subregion, locality, ps_site_id, ps_station_id, depth_strata, n_transects,\n         n_taxa, total_count, avg_count, avg_count_m2, avg_biomass_m2,  habitat, exposure) \n\n\nIn total, we conducted surveys at 90 sites and 167 stations across 4 regions, covering approximately 66,450 m² of reef habitat (Table 1, Figure 1).\n\n\nCode\n# Habitat map\nhabitat_pal &lt;- c(\"fore reef\"  = \"#C5FFFD\",\n                 \"back reef\"  = \"#DF2935\",\n                 \"channel\"    = \"#D8CC34\",\n                 \"patch reef\" = \"#772D8B\")\n\ntrophic_palette &lt;- c(\"Herbivore/Detritivore\" = \"#5C9E5C\",   # Earthy green (natural, calming)\n                     \"Planktivore\"            = \"#4C9CB2\",   # Soft teal-blue (planktivores)\n                     \"Lower-carnivore\"        = \"#E1B07E\",   # Sandy ochre (mid-level predator)\n                     \"Top-predator\"           = \"#C75D4D\",   # Muted brick red (assertive but not harsh)\n                     \"Shark\"                  = \"#7E6FAB\",   # Deep slate violet (distinctive, dignified)\n                     \"NA\"                     = \"#D0D0D0\")    # Light neutral gray (non-disruptive)\n\nstations_sf &lt;- stations |&gt;\n  left_join(uvs_sites |&gt; \n              select(ps_site_id, latitude, longitude),\n            by = \"ps_site_id\") |&gt;\n  mutate(habitat = factor(habitat, levels = names(habitat_pal))) |&gt;\n  group_by(ps_site_id, region, subregion, locality, habitat, exposure, latitude, longitude) |&gt; \n  summarize(team = paste(unique(diver), collapse = \"/\"),\n            strata = paste(unique(paste(depth_strata, \" (\",depth_m ,\"m)\", sep = \"\")), \n                            collapse = \"\\n\"),\n            surveyed_area = sum(area_m2),\n            n_stations = n_distinct(ps_station_id),\n            .groups = \"drop\") |&gt;\n  sf::st_as_sf(coords = c(\"longitude\", \"latitude\"), crs = 4326) \n\nmapview::mapview(stations_sf,\n                 zcol = \"habitat\",\n                 legend = TRUE,\n                 col.regions = habitat_pal,\n                 map.types = \"Esri.WorldImagery\",\n                 layer.name = \"Habitat\",\n                 popup = leafpop::popupTable(stations_sf, \n                                             zcol = c(\"ps_site_id\", \"strata\", \"team\", \"surveyed_area\", \"habitat\", \"exposure\"))) |&gt; \n  leafem::addMouseCoordinates() |&gt; \n  addFullscreenControl()\n\n\n\n\n\n\n\n\nFigure 1: Map of fish survey stations\n\n\n\n\n\n\nCode\nstations |&gt; \n  group_by(region, habitat, depth_strata) |&gt;\n  summarise(n = n_distinct(ps_station_id), .groups = \"drop\") |&gt; \n  pivot_wider(names_from = habitat, values_from = n, values_fill = 0) |&gt; \n  mutate(Total = rowSums(across(where(is.numeric)), na.rm = TRUE)) |&gt;\n  gt(groupname_col = \"region\") |&gt; \n  tab_header(title = \"Summary of sampling effort by region\",\n             subtitle = \"Number of stations surveyed by depth strata and habitat\") |&gt;\n  tab_spanner(label = \"Reef Habitats\", \n              columns = c(\"fore reef\", \"back reef\", \"channel\", \"patch reef\")) |&gt; \n  tab_style(style = list(cell_fill(color = \"#f0f0f0\"),\n                         cell_text(weight = \"bold\")),\n            locations = list(cells_column_labels(everything()),\n                             cells_column_spanners(spanners = \"Reef Habitats\"))) |&gt;\n  opt_table_font(font = list(gt::google_font(\"Roboto\"), default_fonts())) |&gt;\n  opt_row_striping() |&gt; \n  tab_options(row_group.as_column = T,\n              table.width = pct(100),\n              table.font.size = \"small\") |&gt; \n  opt_vertical_padding(scale = 0.7) |&gt; \n    tab_source_note(source_note = \"Depth stratum: supershallow (&lt; 6 m), shallow (7 - 15 m), and deep (&gt;= 15 m).\") \n\n\n\n\nTable 1: Number of fish survey stations by habitat and depth strata\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSummary of sampling effort by region\n\n\nNumber of stations surveyed by depth strata and habitat\n\n\n\ndepth_strata\n\nReef Habitats\n\nTotal\n\n\nfore reef\nback reef\nchannel\npatch reef\n\n\n\n\nLovongai\nshallow\n16\n3\n0\n0\n19\n\n\ndeep\n9\n0\n0\n0\n9\n\n\nsupershallow\n1\n0\n0\n0\n1\n\n\nManus\nshallow\n15\n0\n1\n1\n17\n\n\nsupershallow\n2\n0\n1\n1\n4\n\n\ndeep\n13\n0\n0\n2\n15\n\n\nMurat\ndeep\n22\n0\n0\n0\n22\n\n\nshallow\n22\n0\n0\n0\n22\n\n\nWestern Islands\ndeep\n25\n1\n0\n0\n26\n\n\nshallow\n27\n2\n0\n0\n29\n\n\nsupershallow\n1\n2\n0\n0\n3\n\n\n\nDepth stratum: supershallow (&lt; 6 m), shallow (7 - 15 m), and deep (&gt;= 15 m).\n\n\n\n\n\n\n\n\n\n\n\nSubsequent sections will summarize the data by region and subregion, characterize the dominant taxa, evaluate sampling sufficiency, and explore spatial and ecological drivers of richness, abundance, biomass, and community structure."
  },
  {
    "objectID": "eda_fish.html#regional-summary",
    "href": "eda_fish.html#regional-summary",
    "title": "Exploratory Analysis of Fish Survey Data",
    "section": "2.1 Regional summary",
    "text": "2.1 Regional summary\nThe tables below (Table 2, Table 3) summarize survey coverage and observed patterns in species richness and abundance across regions and subregions. Metrics include the number of stations surveyed, total fish counted, and average richness, abundance, and biomass per station.\nThese summaries reveal distinct regional patterns in reef fish communities. Lovongai recorded the highest species richness and the greatest average fish biomass per station. In contrast, Murat exhibited the lowest richness and biomass. The Western Islands showed the highest fish abundance, but average biomass per station was comparable to Murat, suggesting smaller-bodied species dominate. Manus had the lowest overall abundance.\nIn the following sections, we explore spatial and ecological patterns in species richness, abundance, and biomass, focusing on variation across region, depth strata, and observer.\n\n\nCode\n# --- Region-level summary -----------------------------------------------\nregion_summary &lt;- station_summary |&gt; \n  group_by(region) |&gt; \n  summarize(n_stations = n_distinct(ps_station_id),\n            total_count = sum(total_count),\n            avg_taxa = round(mean(n_taxa)),\n            avg_count = round(mean(avg_count)),\n            avg_count_m2 = mean(avg_count_m2),\n            avg_biomass_m2 = mean(avg_biomass_m2),\n            .groups = \"drop\")\n\nn_taxa_by_region &lt;- biomass_by_station_and_taxa |&gt;\n  left_join(region_lookup) |&gt;\n  group_by(region) |&gt; \n  summarise(n_taxa = n_distinct(accepted_aphia_id[avg_count &gt; 0]),\n            .groups = \"drop\") \n\nregion_summary &lt;- region_summary |&gt; \n  left_join(n_taxa_by_region) |&gt; \n  relocate(n_taxa, .after = n_stations) \n\n\n\n\nCode\nregion_summary |&gt; \n  mutate(across(where(is.numeric), ~round(.x, 2)),\n         total_count = scales::comma(total_count)) |&gt; \n  gt(rowname_col = \"region\") |&gt; \n  tab_header(title = \"Summary of Fish Surveys by Region\",\n             subtitle = \"Average counts and biomass per station\") |&gt; \n  cols_label(n_stations = \"Stations\",\n             n_taxa = \"Taxa Observed\",\n             total_count = \"Total Individuals\",\n             avg_count = \"Avg. Count\",\n             avg_taxa = \"Avg. Nº Taxa\",\n             avg_count_m2 = \"Avg. Count (per m²)\",\n             avg_biomass_m2 = \"Avg. Biomass (g/m²)\") |&gt; \n  tab_style(style = list(cell_fill(color = \"#f0f0f0\"),\n                         cell_text(weight = \"bold\")),\n            locations = cells_column_labels(everything())) |&gt;\n  opt_table_font(font = list(gt::google_font(\"Roboto\"), default_fonts())) |&gt;\n  opt_row_striping() |&gt; \n  tab_options(row_group.as_column = T,\n              table.width = pct(100),\n              table.font.size = \"small\") |&gt; \n  opt_vertical_padding(scale = 0.7)\n\n\n\n\nTable 2: Summary of fish surveys by region\n\n\n\n\n\n\n\n\n\nSummary of Fish Surveys by Region\n\n\nAverage counts and biomass per station\n\n\n\nStations\nTaxa Observed\nTotal Individuals\nAvg. Nº Taxa\nAvg. Count\nAvg. Count (per m²)\nAvg. Biomass (g/m²)\n\n\n\n\nLovongai\n29\n330\n21,611\n55\n255\n4.63\n542.49\n\n\nManus\n36\n309\n16,968\n53\n168\n2.99\n222.69\n\n\nMurat\n44\n275\n34,926\n52\n265\n5.04\n187.34\n\n\nWestern Islands\n58\n311\n41,619\n48\n354\n6.72\n198.95\n\n\n\n\n\n\n\n\n\n\n\n\nCode\n# --- Subregion-level summary -----------------------------------------------\n\nsubregion_summary &lt;- station_summary |&gt; \n  group_by(region, subregion) |&gt; \n  summarize(n_stations = n_distinct(ps_station_id),\n            total_count = sum(total_count),\n            avg_taxa = round(mean(n_taxa)),\n            avg_count = round(mean(avg_count)),\n            avg_count_m2 = mean(avg_count_m2),\n            avg_biomass_m2 = mean(avg_biomass_m2),\n            .groups = \"drop\")\n\nn_taxa_by_subregion &lt;- biomass_by_station_and_taxa |&gt;\n  left_join(stations |&gt; distinct(ps_site_id, region, subregion)) |&gt;\n  group_by(subregion) |&gt; \n  summarise(n_taxa = n_distinct(accepted_aphia_id[avg_count &gt; 0]),\n            .groups = \"drop\") \n\nsubregion_summary &lt;- subregion_summary |&gt; \n  left_join(n_taxa_by_subregion) |&gt; \n  relocate(n_taxa, .after = n_stations) \n\n\n\n\nCode\nsubregion_summary |&gt; \n  mutate(across(where(is.numeric), ~round(.x, 2)),\n         total_count = scales::comma(total_count)) |&gt; \n  gt(groupname_col = \"region\",\n     rowname_col = \"subregion\") |&gt; \n  tab_header(title = \"Summary of Fish Surveys by Island\",\n             subtitle = \"Average counts and biomass per station\") |&gt; \n  cols_label(n_stations = \"Stations\",\n             n_taxa = \"Taxa Observed\",\n             total_count = \"Total Individuals\",\n             avg_taxa = \"Avg. Nº Taxa\",\n             avg_count = \"Avg. Count\",\n             avg_count_m2 = \"Avg. Count (per m²)\",\n             avg_biomass_m2 = \"Avg. Biomass (g/m²)\") |&gt; \n  tab_style(style = list(cell_fill(color = \"#f0f0f0\"),\n                         cell_text(weight = \"bold\")),\n            locations = cells_column_labels(everything())) |&gt;\n  opt_table_font(font = list(gt::google_font(\"Roboto\"), default_fonts())) |&gt;\n  opt_row_striping() |&gt; \n  tab_options(row_group.as_column = T,\n              table.width = pct(100),\n              table.font.size = \"small\") |&gt; \n  opt_vertical_padding(scale = 0.7)\n\n\n\n\nTable 3: Summary of fish surveys by subregion\n\n\n\n\n\n\n\n\n\nSummary of Fish Surveys by Island\n\n\nAverage counts and biomass per station\n\n\n\nStations\nTaxa Observed\nTotal Individuals\nAvg. Nº Taxa\nAvg. Count\nAvg. Count (per m²)\nAvg. Biomass (g/m²)\n\n\n\n\nLovongai\nAu\n4\n101\n3,623\n40\n453\n7.48\n2410.38\n\n\nDunung\n4\n136\n1,633\n63\n110\n2.06\n101.86\n\n\nEnelava\n2\n107\n1,450\n72\n121\n2.19\n115.34\n\n\nKung\n2\n70\n382\n42\n96\n1.61\n196.97\n\n\nNeitab\n3\n105\n971\n47\n149\n2.74\n126.82\n\n\nNemto\n2\n72\n589\n50\n98\n1.84\n95.35\n\n\nTingwon\n9\n205\n12,499\n62\n435\n8.21\n485.15\n\n\nTsolik\n3\n100\n464\n48\n52\n0.89\n40.40\n\n\nManus\nBipi\n14\n217\n9,679\n56\n241\n4.37\n361.15\n\n\nHarengan\n18\n234\n5,992\n50\n125\n2.13\n139.46\n\n\nManus\n4\n127\n1,297\n58\n108\n1.98\n112.63\n\n\nMurat\nEmirau\n12\n174\n8,560\n53\n238\n4.40\n227.46\n\n\nMussau\n26\n242\n19,680\n53\n252\n4.81\n185.50\n\n\nTench\n6\n127\n6,686\n52\n371\n7.30\n115.03\n\n\nWestern Islands\nAua\n6\n105\n5,669\n38\n472\n9.30\n115.88\n\n\nLuf\n15\n216\n9,741\n49\n313\n5.81\n182.92\n\n\nNinigo\n27\n257\n18,293\n53\n335\n6.37\n215.16\n\n\nWuvulu\n10\n150\n7,916\n43\n396\n7.48\n229.10"
  },
  {
    "objectID": "eda_fish.html#taxonomic-summary",
    "href": "eda_fish.html#taxonomic-summary",
    "title": "Exploratory Analysis of Fish Survey Data",
    "section": "2.2 Taxonomic summary",
    "text": "2.2 Taxonomic summary\n\n\nCode\n# --- Taxon-level summary -----------------------------------------------\n\ntaxa_summary &lt;- biomass_by_station_and_taxa |&gt; \n  group_by(trophic_group, order, family, accepted_name) |&gt; \n  summarise(total_count = sum(total_count),\n            avg_length_wm = round(mean(avg_length_wm, na.rm = T)),\n            avg_count = mean(avg_count),\n            freq_obs = round(100*sum(avg_count_m2 &gt; 0)/n(),2),\n            across(c(\"avg_biomass_m2\",\"avg_count_m2\"), mean, na.rm = T),\n            .groups = \"drop\") |&gt; \n  left_join(biomass_per_obs |&gt; \n              group_by(accepted_name) |&gt; \n              summarize(min_tl_cm = min(avg_length),\n                        max_tl_cm = max(avg_length),\n                        .groups = \"drop\")) |&gt; \n  mutate(across(c(freq_obs, avg_count, avg_biomass_m2, avg_count_m2), ~round(.x, 6))) \n\n# --- Family - level summary -------------------------------------\n\nbiomass_by_station_and_family &lt;- biomass_by_station_and_taxa |&gt;\n  group_by(ps_station_id, order, family) |&gt;\n  summarise(total_count    = sum(total_count), \n            avg_count      = sum(avg_count),\n            avg_count_m2   = sum(avg_count_m2),\n            avg_biomass_m2 = sum(avg_biomass_m2),\n            .groups = \"drop\")\n\nfamily_summary &lt;- biomass_by_station_and_family |&gt; \n  group_by(order, family) |&gt; \n  summarise(freq_obs       = round(100 * n_distinct(ps_station_id[avg_count_m2 &gt; 0]) / n_distinct(ps_station_id),1),,\n            avg_count      = round(mean(avg_count), 3),\n            avg_count_m2   = mean(avg_count_m2),\n            avg_biomass_m2 = mean(avg_biomass_m2),\n            .groups = \"drop\") |&gt;\n  left_join(biomass_by_station_and_taxa |&gt;\n              group_by(order, family) |&gt;\n              summarise(total_count = round(sum(total_count)),\n                        n_taxa     = n_distinct(accepted_name[avg_count_m2 &gt; 0]),\n                        .groups = \"drop\"),\n            by = c(\"order\", \"family\")) |&gt;\n  mutate(across(c(avg_count, avg_count_m2, avg_biomass_m2), round, 6)) |&gt; \n  select(order, family, n_taxa, total_count, everything())\n\n\nDuring the expedition, we recorded a total of 115,124.5 individual fish across 462 distinct taxa during standardized transect surveys. Species richness varied across regions with Lovongai exhibiting the highest number of taxa (330 species), followed by the Western Islands and Manus. Murat showed the lowest regional richness, with only 275 species observed.\n\n\nCode\nlibrary(highcharter)\n\nlvl_opts &lt;-  list(list(level = 1,\n                       borderWidth = 0,\n                       borderColor = \"transparent\",\n                       dataLabels = list(enabled = TRUE,\n                                         align = \"left\",\n                                         verticalAlign = \"top\",\n                                         style = list(fontSize = \"12px\", \n                                                      textOutline = FALSE,\n                                                      color = \"#FFFCF9\",\n                                                      fontWeight = \"bold\"))),\n                  list(level = 2,\n                       borderWidth = 0,\n                       borderColor = \"transparent\",\n                       colorVariation = list(key = \"brightness\", to = 0.250),\n                       dataLabels = list(enabled = FALSE),\n                       style = list(fontSize = \"9px\",\n                                    textOutline = FALSE, \n                                    color = \"#FFFCF9\", \n                                    fontWeight = \"bold\")))\n\nhc_data &lt;- taxa_summary |&gt; \n  mutate(n = 1) |&gt; \n  mutate_if(is.numeric, round,2) |&gt; \n  data_to_hierarchical(c(order, family), n)\n\ndiversity_treemap &lt;- hchart(hc_data,\n                            type = \"treemap\",\n                            allowDrillToNode = TRUE,\n                            levels = lvl_opts,\n                            tooltip = list(valueDecimals = FALSE)) |&gt; \n  hc_chart(style = list(fontFamily = \"Roboto\")) |&gt; \n  hc_title(text = \"Number of fish species by order and family\",\n           align = \"left\",\n           style = list(fontFamily = \"Roboto\", fontSize = \"22px\")) |&gt; \n  hc_size(height = 500)\n\ndiversity_treemap\n\n\n\n\n\n\n\n\nFigure 2: Number of fish species by order and family\n\n\n\n\nThe most taxonomically rich families in our surveys were Labridae (wrasses, n = 80), and Pomacentridae (surgeonfishes, n = 78), followed by Chaetodontidae (butterflyfishes, n = 35) ,Acanthuridae (surgeonfishes, n = 32) and Scaridae (parrotfishes, 31) (Table 4)\n\n\nCode\n# Custom theme based on nytimes but with normal header casing\ncustom_tbl_theme &lt;- reactableTheme(\n  backgroundColor = \"#ffffff\",\n  borderColor = \"#e0e0e0\",\n  stripedColor = \"#f9f9f9\",\n  highlightColor = \"#f0f0f0\",\n  cellPadding = \"2px\",\n  style = list(fontFamily = \"Roboto\", fontSize = \"13px\"),\n  headerStyle = list(background = \"#efefef\",\n                     fontWeight = \"bold\",\n                     fontSize = \"13px\",\n                     textTransform = \"none\",   # &lt;- disables all caps\n                     color = \"black\"))\n\n# Prepare data\nfamily_summary_tbl &lt;- family_summary |&gt;\n  mutate(`Taxa Observed`        = n_taxa,\n         `Total Count`    = total_count,\n         `Avg. Count`           = round(avg_count, 2),\n         `Freq. Occurrence (%)` = round(freq_obs, 1),\n         `Avg. Abundance (ind/m²)`      = round(avg_count_m2, 4),\n         `Avg. Biomass (g/m²)`  = round(avg_biomass_m2, 4)) |&gt;\n  select(order, family, `Taxa Observed`, `Total Count`, `Avg. Count`, \n         `Freq. Occurrence (%)`, `Avg. Abundance (ind/m²)`, `Avg. Biomass (g/m²)`)\n\n# Build table\nreactable(family_summary_tbl,\n          filterable      = TRUE,\n          pagination      = TRUE,\n          defaultPageSize = 10,\n          striped         = TRUE,\n          highlight       = TRUE,\n          defaultSorted   = list(`Taxa Observed`  = \"desc\"),\n          theme           = custom_tbl_theme,\n          columns         = list(order                  = colDef(name = \"Order\", minWidth = 150),\n                                 family                 = colDef(name = \"Family\", minWidth = 150),\n                                 `Freq. Occurrence (%)` = colDef(cell = function(value) paste0(value, \"%\"), align = \"center\"),\n                                 `Avg. Biomass (g/m²)`  = colDef(cell = function(value) comma(value, accuracy = 0.001)),\n                                 `Avg. Abundance (ind/m²)` = colDef(cell = function(value) comma(value, accuracy = 0.001)))) |&gt; \n  add_title(\"Fish Families\") |&gt; \n  add_subtitle(\"Summary of fish families observed during the expedition\",\n               font_size = 20,\n               font_color = '#666666',\n               margin = reactablefmtr::margin(t=10,r=0,b=15,l=0))\n\n\n\n\nTable 4: Summary of fish families observed during the expedition\n\n\n\nFish Families\nSummary of fish families observed during the expedition\n\n\n\n\n\n\n\nSome of the most commonly encountered species includede the bluestreak cleaner wrasse (Labroides dimidiatus, observed at 87% of stations), twospot surgeonfish (Ctenochaetus binotatus, 76%), and bicolor chromis (Pycnochromis margaritifer, 75%)(Table 5). These species were widespread across depth strata and regions.\nIn terms of numerical abundance, the most dominant taxa were the ternate chromis (Chromis ternatensis, 0.84 ind/m²), bicolor chromis (P. margaritifer, 0.73 ind/m²), and the darkfin chromis (Pycnochromis atripes, 0.43 ind/m²).\nBiomass was dominated by larger-bodied taxa such as the sleek unicornfish (Naso hexacanthus, 25 g/m²), bigeye trevally (Caranx sexfasciatus, 22 g/m²), and rainbow runner (Elagatis bipinnulata, 17 g/m²), all of which contributed significantly to overall fish biomass despite lower numerical abundance.\nWe explore differences in community composition across regions in the next sections.\n\n\nCode\n# Prepare data\ntaxa_summary_tbl &lt;- taxa_summary |&gt; \n  rename(`Avg. length (cm)`        = avg_length_wm,\n         `Total count`             = total_count,\n         `Accepted name`           = accepted_name,\n         `Trophic group`           = trophic_group) |&gt; \n  mutate(`Length range (cm)`       = paste0(min_tl_cm, \"–\", max_tl_cm),\n         `Avg. count`              = round(avg_count, 2),\n         `Freq. occurrence (%)`    = round(freq_obs, 1),\n         `Avg. abundance (ind/m²)` = round(avg_count_m2, 4),\n         `Avg. biomass (g/m²)`     = round(avg_biomass_m2, 4)) |&gt;\n  select(family, `Accepted name`, `Trophic group`, `Length range (cm)`, `Avg. length (cm)`,\n         `Total count`, `Avg. count`, `Freq. occurrence (%)`,\n         `Avg. abundance (ind/m²)`, `Avg. biomass (g/m²)`)\n\n# Build interactive table\nreactable(taxa_summary_tbl,\n          filterable      = TRUE,\n          pagination      = TRUE,\n          defaultPageSize = 10,\n          striped         = TRUE,\n          highlight       = TRUE,\n          defaultSorted   = list(`Total count` = \"desc\"),\n          theme           = custom_tbl_theme,\n          columns = list(family                     = colDef(name = \"Family\", minWidth = 150),\n                         `Accepted name`            = colDef(name = \"Accepted name\",\n                                                             cell = function(value) htmltools::tags$i(value),\n                                                             minWidth = 180),\n                         `Freq. occurrence (%)`     = colDef(cell = function(value) paste0(value, \"%\"), align = \"center\"),\n                         `Avg. biomass (g/m²)`      = colDef(cell = function(value) comma(value, accuracy = 0.001)),\n                         `Avg. abundance (ind/m²)`  = colDef(cell = function(value) comma(value, accuracy = 0.001)))) |&gt;\n  add_title(\"Fish species\") |&gt;\n  add_subtitle(\"Summary of fish species observed during the expedition\",\n               font_size  = 20,\n               font_color = \"#666666\",\n               margin     = reactablefmtr::margin(t = 10, r = 0, b = 15, l = 0))\n\n\n\n\nTable 5: Summary of fish species observed during the expedition\n\n\n\nFish species\nSummary of fish species observed during the expedition"
  },
  {
    "objectID": "eda_fish.html#overall-patterns",
    "href": "eda_fish.html#overall-patterns",
    "title": "Exploratory Analysis of Fish Survey Data",
    "section": "6.1 Overall patterns",
    "text": "6.1 Overall patterns\n•   Contribution of each trophic group to total biomass and abundance (stacked bar plots).\n•   Emphasize dominant groups (e.g. planktivores, herbivores, piscivores).\n\n\nCode\nbiomass_by_station_and_taxa |&gt; \n  group_by(ps_station_id, trophic_group) |&gt; \n  summarize(total_biomass_m2 = sum(avg_biomass_m2),\n            total_count_m2   = sum(avg_count_m2),\n            .groups = \"drop\") |&gt; \n  left_join(stations |&gt; \n              distinct(ps_station_id, region, subregion), \n            by = \"ps_station_id\") |&gt; \n  group_by(region, subregion, trophic_group) |&gt;\n  summarize(avg_biomass_m2 = mean(total_biomass_m2),\n            avg_count_m2   = mean(total_count_m2),\n            .groups = \"drop\") |&gt; \n  ggplot(aes(fct_reorder(subregion, avg_biomass_m2, sum, .desc = T), avg_biomass_m2, fill = trophic_group))+\n  geom_col()+\n  facet_wrap(~region, ncol = 4, scales = \"free_x\") +\n  labs(x = \"\", y = \"Average biomass (g/m²)\", fill = \"\",\n       title = \"Average fish biomass by trophic group and region\",\n       subtitle = \"Stacked bar plots show the contribution of each trophic group to total biomass\")+\n  theme(axis.text.x = element_text(angle = 45, hjust = 1),\n        legend.position = \"bottom\",\n        legend.box = \"horizontal\")+\n  guides(fill = guide_legend(nrow = 1, byrow = TRUE))\n\n\n\n\n\n\n\n\n\n\n\nCode\nbiomass_by_station_and_taxa |&gt; \n  group_by(ps_station_id, trophic_group) |&gt; \n  summarize(total_biomass_m2 = sum(avg_biomass_m2),\n            total_count_m2   = sum(avg_count_m2),\n            .groups = \"drop\") |&gt; \n  left_join(stations |&gt; \n              distinct(ps_station_id, region, subregion), \n            by = \"ps_station_id\") |&gt; \n  group_by(region, subregion, trophic_group) |&gt;\n  summarize(avg_biomass_m2 = mean(total_biomass_m2),\n            avg_count_m2   = mean(total_count_m2),\n            .groups = \"drop\") |&gt; \n  ggplot(aes(fct_reorder(subregion, avg_count_m2, sum, .desc = T), avg_count_m2, fill = trophic_group))+\n  geom_col()+\n  facet_wrap(~region, ncol = 4, scales = \"free_x\") +\n  labs(x = \"\", y = \"Average Abundance (in/m²)\", fill = \"\",\n       title = \"Average fish Abundance by trophic group and region\",\n       subtitle = \"Stacked bar plots show the contribution of each trophic group to total abundance\")+\n  theme(axis.text.x = element_text(angle = 45, hjust = 1),\n        legend.position = \"bottom\",\n        legend.box = \"horizontal\")+\n  guides(fill = guide_legend(nrow = 1, byrow = TRUE))"
  },
  {
    "objectID": "eda_fish.html#spatial-trends",
    "href": "eda_fish.html#spatial-trends",
    "title": "Exploratory Analysis of Fish Survey Data",
    "section": "6.1 spatial trends",
    "text": "6.1 spatial trends\nRegional comparisons of trophic structure (e.g. group-wise proportions per region). • Depth-stratified breakdowns, if patterns emerge."
  },
  {
    "objectID": "eda_fish.html#top-predators",
    "href": "eda_fish.html#top-predators",
    "title": "Exploratory Analysis of Fish Survey Data",
    "section": "6.1 top predators",
    "text": "6.1 top predators\n\n\nCode\nbiomass_top_pred &lt;- biomass_by_station_and_trophic |&gt; \n  filter(trophic_group %in% c(\"Top-predator\")) |&gt; \n  group_by(ps_station_id, trophic_group, region) |&gt; \n  summarize(prop_top_pred = sum(frac_biomass), .groups = \"drop\") \n\nbiomass_top_pred |&gt; \n  ggplot(aes(x = region, y = prop_top_pred)) +\n  geom_boxplot(outlier.shape = NA, fill = \"#F08A4B\", alpha = 0.6) +\n  geom_jitter(width = 0.2, alpha = 0.6) +\n  labs(\n    title = \"Proportion of Biomass in Top Predators and Sharks\",\n    y = \"Proportion of Total Biomass\",\n    x = NULL\n  ) +\n  theme_minimal(base_size = 13)"
  },
  {
    "objectID": "eda_fish.html#by-family",
    "href": "eda_fish.html#by-family",
    "title": "Exploratory Analysis of Fish Survey Data",
    "section": "5.1 By Family",
    "text": "5.1 By Family\n\n\nCode\nlibrary(paletteer)\n\ncreate_family_pal &lt;- function(col, n){\n  col &lt;- unique(col)\n  \n  foo &lt;- scales::colour_ramp(c(adjust_luminance(color = col, steps = +2),\n                      adjust_luminance(color = col, steps = -.5)))\n  \n  foo(seq(0, 1, length = n))\n}\n\ntaxa_colors &lt;- taxa_summary |&gt; \n  distinct(family, accepted_name, avg_biomass_m2) |&gt; \n  mutate(color_fam = highcharter::colorize(family, \n                              paletteer_d(\"ggsci::default_igv\", direction = -1, n = 43))) |&gt; \n  arrange(desc(family)) |&gt; \n  group_by(family) |&gt; \n  arrange(desc(avg_biomass_m2)) |&gt; \n  mutate(n_taxa = n_distinct(accepted_name),\n         color_sp = highcharter::colorize(accepted_name,\n                             colors = create_family_pal(col = color_fam, n = n_taxa))) |&gt; \n  ungroup()\n\nhc_data &lt;- taxa_summary |&gt; \n  left_join(taxa_colors |&gt; \n              select(accepted_name, color_fam, color_sp)) |&gt; \n  filter(!is.na(color_sp)) |&gt; \n  mutate_if(is.numeric, round, 1) |&gt; \n  arrange(desc(family)) |&gt; \n  group_by(family) |&gt; \n  arrange(desc(avg_biomass_m2)) \n\n\ndata_to_hierarchical(hc_data,\n                     c(family, accepted_name), \n                     avg_biomass_m2, colors = unique(hc_data$color_fam)) |&gt; \n  hchart(\n    type = \"treemap\",\n    allowDrillToNode = TRUE,\n    levels = lvl_opts,\n    tooltip = list(valueDecimals = 1)) |&gt; \n  hc_chart(style = list(fontFamily = \"Times New Roman\")) |&gt; \n  hc_title(text = \"Fish biomass by family\",\n           style = list(fontFamily = \"Times New Roman\")) |&gt; \n  hc_size(height = 500) |&gt; \n  highcharter::hc_tooltip(crosshairs = T) \n\n\n\n\n\n\n\n\nFigure 19: Biomass by family\n\n\n\n\n\n\nCode\nlibrary(plotly)\n\n# 1. Get top 20 families by total biomass\ntop_fams &lt;- biomass_by_station_and_family |&gt; \n  group_by(family) |&gt; \n  summarize(total_biomass = sum(avg_biomass_m2, na.rm = TRUE), .groups = \"drop\") |&gt; \n  slice_max(total_biomass, n = 20) |&gt; \n  pull(family)\n\n# 2. Prepare data and group others into \"Other\"\nplot_data &lt;- biomass_by_station_and_family |&gt;\n  left_join(stations |&gt; distinct(ps_station_id, region, subregion), by = \"ps_station_id\") |&gt;\n  mutate(family = if_else(family %in% top_fams, family, \"Other\")) |&gt; \n  group_by(region, subregion, family) |&gt;\n  summarize(avg_biomass_m2 = round(mean(avg_biomass_m2), 1), .groups = \"drop\") |&gt;\n  mutate(subregion = fct_reorder(subregion, avg_biomass_m2, .fun = sum, .desc = TRUE))\n\n# 3. Build family color scale (ensure 'Other' is included)\nfam_colors &lt;- taxa_colors |&gt; \n  filter(family %in% top_fams) |&gt; \n  distinct(family, color_fam) |&gt; \n  add_row(family = \"Other\", color_fam = \"#CCCCCC\") |&gt; \n  deframe()\n\n# 4. Plot\np &lt;- ggplot(plot_data, aes(x = subregion, y = avg_biomass_m2, fill = family)) +\n  geom_col() +\n  labs(x = \"\", y = \"Average biomass (g/m²)\", fill = \"\",\n       title = \"Fish Biomass by Family and Subregion\",\n       subtitle = \"Stacked bar plot showing mean biomass contributions by family (top 20 only)\") +\n  scale_fill_manual(values = fam_colors) +\n  theme_minimal(base_size = 13) +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1),\n        legend.position = \"bottom\",\n        legend.box = \"horizontal\") +\n  guides(fill = guide_legend(nrow = 2, byrow = TRUE))+\n  facet_wrap(~region, ncol = 4, scales = \"free_x\")\n\nggplotly(p, tooltip = c(\"x\", \"y\", \"fill\")) |&gt; \n  layout(legend = list(\n    orientation = \"h\",\n    xanchor = \"center\",\n    x = 0.5,\n    y = -0.25,\n    title = list(text = \"\")))\n\n\n\n\n\n\n\n\nFigure 20: Biomass by family and subregion"
  },
  {
    "objectID": "eda_fish.html#by-species",
    "href": "eda_fish.html#by-species",
    "title": "Exploratory Analysis of Fish Survey Data",
    "section": "5.2 By Species",
    "text": "5.2 By Species\n\n\nCode\ntmp_plot &lt;- taxa_summary |&gt; \n  mutate(ind_100m2 = 100*avg_count_m2) |&gt; \n  mutate_if(is.numeric, round, 3) |&gt; \n  mutate(tooltip = c(paste0(\"Taxa = \", accepted_name,\n                            \"\\n Family = \", family,\n                            \"\\n Frequency (% stations) = \", freq_obs,\n                            \"\\n Abundance (ind/100m2) = \", ind_100m2,\n                            \"\\n Biomass (g/m2) = \", avg_biomass_m2))) |&gt; \n  ggplot()+\n  ggiraph::geom_point_interactive(aes(x = freq_obs, \n                                      y = ind_100m2, \n                                      size = avg_biomass_m2, \n                                      col = trophic_group, \n                                      tooltip = tooltip))+\n  scale_color_manual(values = trophic_palette, na.value = \"lightgrey\")+\n  scale_y_log10()+\n  labs(y = \"Abundance (Ind x 100m2)\", \n       x = \"Frequency (% station-strata)\", \n       col = \"Trophic group\", \n       size = \"Biomass\")+\n  ggthemes::theme_hc()+\n  theme(legend.title.position = \"top\", legend.position = \"right\")\n\nggiraph::girafe(ggobj = tmp_plot)\n\n\n\n\n\n\n\n\nFigure 21: Frequency, abundance, and biomass by species"
  },
  {
    "objectID": "eda_fish.html#species-contributions-to-dissimilarity",
    "href": "eda_fish.html#species-contributions-to-dissimilarity",
    "title": "Exploratory Analysis of Fish Survey Data",
    "section": "7.1 Species contributions to dissimilarity",
    "text": "7.1 Species contributions to dissimilarity\nTo identify the species driving regional differences in community composition, we conducted a Similarity Percentages (SIMPER) analysis based on Bray-Curtis dissimilarity of biomass values. This method decomposes pairwise differences between regions into contributions by individual species, highlighting those most responsible for observed dissimilarities. For each pairwise comparison, we extracted the top ten contributing species and visualized their mean biomass in each region. These results offer an intuitive view of which taxa differentiate local assemblages and can help identify regionally distinctive or dominant species.\n\n\nCode\n# 1. Run SIMPER on all region pairs\nsimper_result &lt;- simper(spp_matrix, spp_meta$region, permutations = 999)\n\n# 2. Tidy the output into a long dataframe of top contributors\nsimper_summary_all &lt;- map_dfr(names(simper_result), \n                              function(pair_name) {\n                                sim &lt;- simper_result[[pair_name]]\n                                tibble(pair         = pair_name,\n                                       species      = sim$species,\n                                       avg_contrib  = sim$average,\n                                       sd_contrib   = sim$sd,\n                                       ratio        = sim$ratio,\n                                       mean_group_a = sim$ava,\n                                       mean_group_b = sim$avb,\n                                       cumsum       = sim$cusum,\n                                       p_value      = sim$p) |&gt;\n                                  arrange(desc(avg_contrib)) |&gt;\n                                  slice_head(n = 10) |&gt;\n                                  mutate(across(where(is.numeric), round, 3))})\n\n# 3. Add region labels and melt for plotting\nsimper_plot_data &lt;- simper_summary_all |&gt;\n  separate(pair, into = c(\"region_a\", \"region_b\"), sep = \"_\") |&gt;\n  pivot_longer(cols = c(mean_group_a, mean_group_b),\n               names_to = \"region_code\", values_to = \"mean_biomass\") |&gt;\n  mutate(region = case_when(region_code == \"mean_group_a\" ~ region_a,\n                            region_code == \"mean_group_b\" ~ region_b))\n\n# 4. Function to plot all comparisons for a given region\nplot_simper_by_focal &lt;- function(focal_region) {\n  \n  simper_plot_data |&gt;\n    filter(region_a == focal_region | region_b == focal_region) |&gt;\n    mutate(comparison = if_else(region_a == focal_region, region_b, region_a)) |&gt;\n    ggplot(aes(x = fct_reorder(species, avg_contrib), \n               y = mean_biomass, fill = region)) +\n    geom_col(position = \"dodge\") +\n    facet_wrap(~comparison, scales = \"free_x\") +\n    labs(title = glue(\"Top 10 Species Driving Differences with {focal_region}\"),\n         subtitle = \"SIMPER analysis (Bray-Curtis, biomass)\",\n         x = \"\", y = \"Mean biomass (g/m²)\", fill = \"\") +\n    theme(axis.text.x = element_text(angle = 45, hjust = 1),\n          strip.text = element_text(face = \"bold\"),\n          legend.position = \"bottom\",\n      legend.box = \"horizontal\",\n      legend.text = element_text(size = 10))+\n    guides(fill = guide_legend(nrow = 1, byrow = TRUE))\n  \n}\n\n\n\nManusMuratWestern IslandsLovongai\n\n\n\n\nCode\n#|\n\nplot_simper_by_focal(\"Manus\")\n\n\n\n\n\n\n\n\nFigure 28: Top 10 species driving differences with Manus\n\n\n\n\n\n\n\n\n\nCode\n#|\n\nplot_simper_by_focal(\"Murat\")\n\n\n\n\n\n\n\n\nFigure 29: Top 10 species driving differences with Murat\n\n\n\n\n\n\n\n\n\nCode\n#|\n\nplot_simper_by_focal(\"Western Islands\")\n\n\n\n\n\n\n\n\nFigure 30: Top 10 species driving differences with the Western Islands\n\n\n\n\n\n\n\n\n\nCode\n#|\n\nplot_simper_by_focal(\"Lovongai\")\n\n\n\n\n\n\n\n\nFigure 31: Top 10 species driving differences with Lovongai"
  },
  {
    "objectID": "eda_fish.html#spatial-patterns",
    "href": "eda_fish.html#spatial-patterns",
    "title": "Exploratory Analysis of Fish Survey Data",
    "section": "5.3 Spatial patterns",
    "text": "5.3 Spatial patterns\n\n\nCode\nlibrary(leaflet)\nlibrary(scales)\n\n# Normalize for circle radius (sqrt scaling for visual comparability)\nsite_summary &lt;- station_summary |&gt; \n  group_by(region, subregion, ps_site_id) |&gt; \n  summarize(mean_abundance = mean(avg_count_m2),\n            mean_biomass = mean(avg_biomass_m2, na.rm = TRUE),\n            n_transects = sum(n_transects, na.rm = TRUE),\n            .groups = \"drop\") |&gt; \n  left_join(uvs_sites |&gt; \n              select(ps_site_id, latitude, longitude), \n            by = \"ps_site_id\") \n\n\n\n\n\n\nMean fish biomass (g/m²) by site"
  },
  {
    "objectID": "eda_fish.html#taxa-summary-by-region",
    "href": "eda_fish.html#taxa-summary-by-region",
    "title": "Exploratory Analysis of Fish Survey Data",
    "section": "8.1 Taxa Summary by Region",
    "text": "8.1 Taxa Summary by Region\n\n\n\nTable 9: Taxon-level summary by region"
  },
  {
    "objectID": "eda_fish.html#by-species-1",
    "href": "eda_fish.html#by-species-1",
    "title": "Exploratory Analysis of Fish Survey Data",
    "section": "8.1 By Species",
    "text": "8.1 By Species\n\nLovongaiMuratManusWestern Islands\n\n\n\n\nCode\n# Filter Lovongai data\nlovongai_tbl &lt;- taxa_summary_by_region |&gt; \n  filter(region == \"Lovongai\", avg_biomass_m2 &gt; 0) |&gt;\n  arrange(desc(avg_biomass_m2)) |&gt; \n  mutate(`Accepted name`             = accepted_name,\n         `Family`                    = family,\n         `Total count`               = total_count,\n         `Avg. count`                = round(avg_count, 2),\n         `Freq. occurrence (%)`      = round(freq_obs, 2),\n         `Avg. abundance (ind/m²)`   = round(avg_count_m2, 3),\n         `Avg. biomass (g/m²)`       = round(avg_biomass_m2, 3),\n         `Mean TL (cm)`              = avg_length_wm,\n         `Min TL (cm)`               = min_tl_cm,\n         `Max TL (cm)`               = max_tl_cm) |&gt;\n  select(family, `Accepted name`, `Total count`, `Avg. count`,\n         `Freq. occurrence (%)`, `Avg. abundance (ind/m²)`, `Avg. biomass (g/m²)`,\n         `Mean TL (cm)`, `Min TL (cm)`, `Max TL (cm)`)\n\n# Render reactable\nreactable(lovongai_tbl,\n          filterable      = TRUE,\n          pagination      = TRUE,\n          defaultPageSize = 10,\n          striped         = TRUE,\n          highlight       = TRUE,\n          defaultSorted   = list(`Avg. biomass (g/m²)` = \"desc\"),\n          theme           = custom_tbl_theme,\n          columns         = list(\n            family = colDef(name = \"Family\", minWidth = 150),\n            `Accepted name` = colDef(name = \"Accepted name\",\n                                     cell = function(value) htmltools::tags$i(value),\n                                     minWidth = 180),\n            `Freq. occurrence (%)` = colDef(cell = function(value) paste0(value, \"%\"), align = \"center\"),\n            `Avg. biomass (g/m²)`  = colDef(cell = function(value) comma(value, accuracy = 0.001)),\n            `Avg. abundance (ind/m²)` = colDef(cell = function(value) comma(value, accuracy = 0.001)))) |&gt;\n  add_title(\"Fish species\") |&gt;\n  add_subtitle(\"Summary of fish species observed in Lovongai\",\n               font_size  = 20,\n               font_color = \"#666666\",\n               margin     = reactablefmtr::margin(t = 10, r = 0, b = 15, l = 0))\n\n\nFish species\nSummary of fish species observed in Lovongai\n\n\n\n\n\n\n\n\nCode\n# Filter Murat data\nmurat_tbl &lt;- taxa_summary_by_region |&gt; \n  filter(region == \"Murat\", avg_biomass_m2 &gt; 0) |&gt;\n  mutate(`Accepted name`             = accepted_name,\n         `Family`                    = family,\n         `Total count`               = total_count,\n         `Avg. count`                = round(avg_count, 2),\n         `Freq. occurrence (%)`      = round(freq_obs, 2),\n         `Avg. abundance (ind/m²)`   = round(avg_count_m2, 3),\n         `Avg. biomass (g/m²)`       = round(avg_biomass_m2, 3),\n         `Mean TL (cm)`              = avg_length_wm,\n         `Min TL (cm)`               = min_tl_cm,\n         `Max TL (cm)`               = max_tl_cm) |&gt;\n  select(family, `Accepted name`, `Total count`, `Avg. count`,\n         `Freq. occurrence (%)`, `Avg. abundance (ind/m²)`, `Avg. biomass (g/m²)`,\n         `Mean TL (cm)`, `Min TL (cm)`, `Max TL (cm)`)\n\n# Render reactable\nreactable(murat_tbl,\n          filterable      = TRUE,\n          pagination      = TRUE,\n          defaultPageSize = 10,\n          striped         = TRUE,\n          highlight       = TRUE,\n          defaultSorted   = list(`Avg. biomass (g/m²)` = \"desc\"),\n          theme           = custom_tbl_theme,\n          columns         = list(\n            family = colDef(name = \"Family\", minWidth = 150),\n            `Accepted name` = colDef(name = \"Accepted name\",\n                                     cell = function(value) htmltools::tags$i(value),\n                                     minWidth = 180),\n            `Freq. occurrence (%)` = colDef(cell = function(value) paste0(value, \"%\"), align = \"center\"),\n            `Avg. biomass (g/m²)`  = colDef(cell = function(value) comma(value, accuracy = 0.001)),\n            `Avg. abundance (ind/m²)` = colDef(cell = function(value) comma(value, accuracy = 0.001)))) |&gt;\n  add_title(\"Fish species\") |&gt;\n  add_subtitle(\"Summary of fish species observed in Murat\",\n               font_size  = 20,\n               font_color = \"#666666\",\n               margin     = reactablefmtr::margin(t = 10, r = 0, b = 15, l = 0))\n\n\nFish species\nSummary of fish species observed in Murat\n\n\n\n\n\n\n\n\nCode\n# Filter Manus data\nmanus_tbl &lt;- taxa_summary_by_region |&gt; \n  filter(region == \"Manus\", avg_biomass_m2 &gt; 0) |&gt;\n  mutate(`Accepted name`             = accepted_name,\n         `Family`                    = family,\n         `Total count`               = total_count,\n         `Avg. count`                = round(avg_count, 2),\n         `Freq. occurrence (%)`      = round(freq_obs, 2),\n         `Avg. abundance (ind/m²)`   = round(avg_count_m2, 3),\n         `Avg. biomass (g/m²)`       = round(avg_biomass_m2, 3),\n         `Mean TL (cm)`              = avg_length_wm,\n         `Min TL (cm)`               = min_tl_cm,\n         `Max TL (cm)`               = max_tl_cm) |&gt;\n  select(family, `Accepted name`, `Total count`, `Avg. count`,\n         `Freq. occurrence (%)`, `Avg. abundance (ind/m²)`, `Avg. biomass (g/m²)`,\n         `Mean TL (cm)`, `Min TL (cm)`, `Max TL (cm)`)\n\n# Render reactable\nreactable(manus_tbl,\n          filterable      = TRUE,\n          pagination      = TRUE,\n          defaultPageSize = 10,\n          striped         = TRUE,\n          highlight       = TRUE,\n          defaultSorted   = list(`Avg. biomass (g/m²)` = \"desc\"),\n          theme           = custom_tbl_theme,\n          columns         = list(\n            family = colDef(name = \"Family\", minWidth = 150),\n            `Accepted name` = colDef(name = \"Accepted name\",\n                                     cell = function(value) htmltools::tags$i(value),\n                                     minWidth = 180),\n            `Freq. occurrence (%)` = colDef(cell = function(value) paste0(value, \"%\"), align = \"center\"),\n            `Avg. biomass (g/m²)`  = colDef(cell = function(value) comma(value, accuracy = 0.001)),\n            `Avg. abundance (ind/m²)` = colDef(cell = function(value) comma(value, accuracy = 0.001)))) |&gt;\n  add_title(\"Fish species\") |&gt;\n  add_subtitle(\"Summary of fish species observed in Manus\",\n               font_size  = 20,\n               font_color = \"#666666\",\n               margin     = reactablefmtr::margin(t = 10, r = 0, b = 15, l = 0))\n\n\nFish species\nSummary of fish species observed in Manus\n\n\n\n\n\n\n\n\nCode\n# Filter Murat data\nislands_tbl &lt;- taxa_summary_by_region |&gt; \n  filter(region == \"Western Islands\", avg_biomass_m2 &gt; 0) |&gt;\n  mutate(`Accepted name`             = accepted_name,\n         `Family`                    = family,\n         `Total count`               = total_count,\n         `Avg. count`                = round(avg_count, 2),\n         `Freq. occurrence (%)`      = round(freq_obs, 2),\n         `Avg. abundance (ind/m²)`   = round(avg_count_m2, 3),\n         `Avg. biomass (g/m²)`       = round(avg_biomass_m2, 3),\n         `Mean TL (cm)`              = avg_length_wm,\n         `Min TL (cm)`               = min_tl_cm,\n         `Max TL (cm)`               = max_tl_cm) |&gt;\n  select(family, `Accepted name`, `Total count`, `Avg. count`,\n         `Freq. occurrence (%)`, `Avg. abundance (ind/m²)`, `Avg. biomass (g/m²)`,\n         `Mean TL (cm)`, `Min TL (cm)`, `Max TL (cm)`)\n\n# Render reactable\nreactable(islands_tbl,\n          filterable      = TRUE,\n          pagination      = TRUE,\n          defaultPageSize = 20,\n          striped         = TRUE,\n          highlight       = TRUE,\n          defaultSorted   = list(`Avg. biomass (g/m²)` = \"desc\"),\n          theme           = custom_tbl_theme,\n          columns         = list(\n            family = colDef(name = \"Family\", minWidth = 150),\n            `Accepted name` = colDef(name = \"Accepted name\",\n                                     cell = function(value) htmltools::tags$i(value),\n                                     minWidth = 180),\n            `Freq. occurrence (%)` = colDef(cell = function(value) paste0(value, \"%\"), align = \"center\"),\n            `Avg. biomass (g/m²)`  = colDef(cell = function(value) comma(value, accuracy = 0.001)),\n            `Avg. abundance (ind/m²)` = colDef(cell = function(value) comma(value, accuracy = 0.001)))) |&gt;\n  add_title(\"Fish species\") |&gt;\n  add_subtitle(\"Summary of fish species observed in the Western Islands\",\n               font_size  = 20,\n               font_color = \"#666666\",\n               margin     = reactablefmtr::margin(t = 10, r = 0, b = 15, l = 0))\n\n\nFish species\nSummary of fish species observed in the Western Islands"
  },
  {
    "objectID": "eda_fish.html#by-family-1",
    "href": "eda_fish.html#by-family-1",
    "title": "Exploratory Analysis of Fish Survey Data",
    "section": "8.2 By family",
    "text": "8.2 By family\n\nLovongaiMuratManusWestern Islands\n\n\n\n\nCode\n# Filter Lovongai data\nlovongai_tbl &lt;- family_summary_by_region |&gt; \n  filter(region == \"Lovongai\", avg_biomass_m2 &gt; 0) |&gt;\n  arrange(desc(avg_biomass_m2)) |&gt; \n  mutate(`Family`                    = family,\n         `Total count`               = total_count,\n         `Avg. count`                = round(avg_count, 2),\n         `Freq. occurrence (%)`      = round(freq_obs, 2),\n         `Avg. abundance (ind/m²)`   = round(avg_count_m2, 3),\n         `Avg. biomass (g/m²)`       = round(avg_biomass_m2, 3)) |&gt;\n  select(family, `Total count`, `Avg. count`,\n         `Freq. occurrence (%)`, `Avg. abundance (ind/m²)`, `Avg. biomass (g/m²)`)\n\n# Render reactable\nreactable(lovongai_tbl,\n          filterable      = TRUE,\n          pagination      = TRUE,\n          defaultPageSize = 10,\n          striped         = TRUE,\n          highlight       = TRUE,\n          defaultSorted   = list(`Avg. biomass (g/m²)` = \"desc\"),\n          theme           = custom_tbl_theme,\n          columns         = list(\n            family = colDef(name = \"Family\", minWidth = 150),\n            `Freq. occurrence (%)` = colDef(cell = function(value) paste0(value, \"%\"), align = \"center\"),\n            `Avg. biomass (g/m²)`  = colDef(cell = function(value) comma(value, accuracy = 0.001)),\n            `Avg. abundance (ind/m²)` = colDef(cell = function(value) comma(value, accuracy = 0.001)))) |&gt;\n  add_title(\"Fish families\") |&gt;\n  add_subtitle(\"Summary of fish families observed in Lovongai\",\n               font_size  = 20,\n               font_color = \"#666666\",\n               margin     = reactablefmtr::margin(t = 10, r = 0, b = 15, l = 0))\n\n\nFish families\nSummary of fish families observed in Lovongai\n\n\n\n\n\n\n\n\nCode\n# Filter Lovongai data\nmurat_tbl &lt;- family_summary_by_region |&gt; \n  filter(region == \"Murat\", avg_biomass_m2 &gt; 0) |&gt;\n  arrange(desc(avg_biomass_m2)) |&gt; \n  mutate(`Family`                    = family,\n         `Total count`               = total_count,\n         `Avg. count`                = round(avg_count, 2),\n         `Freq. occurrence (%)`      = round(freq_obs, 2),\n         `Avg. abundance (ind/m²)`   = round(avg_count_m2, 3),\n         `Avg. biomass (g/m²)`       = round(avg_biomass_m2, 3)) |&gt;\n  select(family, `Total count`, `Avg. count`,\n         `Freq. occurrence (%)`, `Avg. abundance (ind/m²)`, `Avg. biomass (g/m²)`)\n\n# Render reactable\nreactable(murat_tbl,\n          filterable      = TRUE,\n          pagination      = TRUE,\n          defaultPageSize = 10,\n          striped         = TRUE,\n          highlight       = TRUE,\n          defaultSorted   = list(`Avg. biomass (g/m²)` = \"desc\"),\n          theme           = custom_tbl_theme,\n          columns         = list(\n            family = colDef(name = \"Family\", minWidth = 150),\n            `Freq. occurrence (%)` = colDef(cell = function(value) paste0(value, \"%\"), align = \"center\"),\n            `Avg. biomass (g/m²)`  = colDef(cell = function(value) comma(value, accuracy = 0.001)),\n            `Avg. abundance (ind/m²)` = colDef(cell = function(value) comma(value, accuracy = 0.001)))) |&gt;\n  add_title(\"Fish families\") |&gt;\n  add_subtitle(\"Summary of fish families observed in Murat\",\n               font_size  = 20,\n               font_color = \"#666666\",\n               margin     = reactablefmtr::margin(t = 10, r = 0, b = 15, l = 0))\n\n\nFish families\nSummary of fish families observed in Murat\n\n\n\n\n\n\n\n\nCode\n# Filter Lovongai data\nmanus_tbl &lt;- family_summary_by_region |&gt; \n  filter(region == \"Manus\", avg_biomass_m2 &gt; 0) |&gt;\n  arrange(desc(avg_biomass_m2)) |&gt; \n  mutate(`Family`                    = family,\n         `Total count`               = total_count,\n         `Avg. count`                = round(avg_count, 2),\n         `Freq. occurrence (%)`      = round(freq_obs, 2),\n         `Avg. abundance (ind/m²)`   = round(avg_count_m2, 3),\n         `Avg. biomass (g/m²)`       = round(avg_biomass_m2, 3)) |&gt;\n  select(family, `Total count`, `Avg. count`,\n         `Freq. occurrence (%)`, `Avg. abundance (ind/m²)`, `Avg. biomass (g/m²)`)\n\n# Render reactable\nreactable(manus_tbl,\n          filterable      = TRUE,\n          pagination      = TRUE,\n          defaultPageSize = 10,\n          striped         = TRUE,\n          highlight       = TRUE,\n          defaultSorted   = list(`Avg. biomass (g/m²)` = \"desc\"),\n          theme           = custom_tbl_theme,\n          columns         = list(\n            family = colDef(name = \"Family\", minWidth = 150),\n            `Freq. occurrence (%)` = colDef(cell = function(value) paste0(value, \"%\"), align = \"center\"),\n            `Avg. biomass (g/m²)`  = colDef(cell = function(value) comma(value, accuracy = 0.001)),\n            `Avg. abundance (ind/m²)` = colDef(cell = function(value) comma(value, accuracy = 0.001)))) |&gt;\n  add_title(\"Fish families\") |&gt;\n  add_subtitle(\"Summary of fish families observed in Manus\",\n               font_size  = 20,\n               font_color = \"#666666\",\n               margin     = reactablefmtr::margin(t = 10, r = 0, b = 15, l = 0))\n\n\nFish families\nSummary of fish families observed in Manus\n\n\n\n\n\n\n\n\nCode\n# Filter Lovongai data\nislands_tbl &lt;- family_summary_by_region |&gt; \n  filter(region == \"Western Islands\", avg_biomass_m2 &gt; 0) |&gt;\n  arrange(desc(avg_biomass_m2)) |&gt; \n  mutate(`Family`                  = family,\n         `Total count`             = total_count,\n         `Avg. count`              = round(avg_count, 2),\n         `Freq. occurrence (%)`    = round(freq_obs, 2),\n         `Avg. abundance (ind/m²)` = round(avg_count_m2, 3),\n         `Avg. biomass (g/m²)`     = round(avg_biomass_m2, 3)) |&gt;\n  select(family, `Total count`, `Avg. count`, `Freq. occurrence (%)`, `Avg. abundance (ind/m²)`, `Avg. biomass (g/m²)`)\n\n# Render reactable\ntmp &lt;- reactable(islands_tbl,\n                 filterable      = TRUE,\n                 pagination      = TRUE,\n                 defaultPageSize = 10,\n                 striped         = TRUE,\n                 highlight       = TRUE,\n                 elementId       = \"summary-tbl\",\n                 defaultSorted   = list(`Avg. biomass (g/m²)` = \"desc\"),\n                 theme           = custom_tbl_theme,\n                 columns         = list(family                    = colDef(name = \"Family\", minWidth = 150),\n                                        `Freq. occurrence (%)`    = colDef(cell = function(value) paste0(value, \"%\"), align = \"center\"),\n                                        `Avg. biomass (g/m²)`     = colDef(cell = function(value) comma(value, accuracy = 0.001)),\n                                        `Avg. abundance (ind/m²)` = colDef(cell = function(value) comma(value, accuracy = 0.001)))) |&gt;\n  add_title(\"Fish families\") |&gt;\n  add_subtitle(\"Summary of fish families observed in the Western Islands\",\n               font_size  = 20,\n               font_color = \"#666666\",\n               margin     = reactablefmtr::margin(t = 10, r = 0, b = 15, l = 0))"
  }
]